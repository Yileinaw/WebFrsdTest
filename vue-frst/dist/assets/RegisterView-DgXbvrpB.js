import{d as R,N as P,r as _,X as b,G as U,y as l,au as k,a,w as t,g as q,an as u,u as n,av as f,aw as N,ax as B,ay as A,az as V,aA as F,q as d,A as c,aB as L,M,D as S,_ as h}from"./index-B8L1PXQk.js";const I="/assets/images/register-illustration.svg",K={class:"auth-container"},T={class:"auth-content"},$={class:"auth-forms"},z={class:"form-container"},D={class:"form-wrapper"},G={class:"login-link-container"},X=R({__name:"RegisterView",setup(j){const w=M();P();const p=_(null),g=_(!1),r=b({username:"",email:"",password:"",confirmPassword:"",agreement:!1}),y=b({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名长度至少为 3 位",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:(m,e,s)=>{const i=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(!e)return s(new Error("请输入邮箱地址"));i.test(e)?s():s(new Error("请输入有效的邮箱地址"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为 6 位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==r.password?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}],agreement:[{validator:(m,e,s)=>{e?s():s(new Error("请阅读并同意用户协议和隐私政策"))},trigger:"change"}]}),v=async()=>{p.value&&await p.value.validate(async m=>{if(m){if(!r.agreement){c.warning("请阅读并同意用户协议和隐私政策");return}g.value=!0;try{const e=await L.register({name:r.username,username:r.username,email:r.email,password:r.password});c.success(e.message||"注册成功！验证邮件已发送至您的邮箱。"),w.push("/login")}catch(e){let s="注册失败，请稍后再试";e.response&&e.response.data&&e.response.data.message?s=e.response.data.message:e.message&&(s=e.message),c.error(`注册失败: ${s}`)}finally{g.value=!1}}else console.log("注册表单校验失败")})},x=()=>{w.push("/login")};return(m,e)=>{const s=u("el-input"),i=u("el-form-item"),E=u("el-button"),C=u("el-form");return S(),U("div",K,[l("div",T,[e[13]||(e[13]=k('<div class="auth-branding" data-v-86b52987><div class="brand-content" data-v-86b52987><div class="logo-container" data-v-86b52987><img src="'+N+'" alt="Logo" class="logo" data-v-86b52987></div><h1 class="brand-title" data-v-86b52987>美食社区</h1><p class="brand-slogan" data-v-86b52987>发现美食，分享生活</p><div class="illustration" data-v-86b52987><img src="'+I+'" alt="Illustration" data-v-86b52987></div></div></div>',1)),l("div",$,[l("div",z,[e[12]||(e[12]=l("div",{class:"form-header"},[l("h2",{class:"form-title"},"创建账号"),l("p",{class:"form-subtitle"},"加入我们的美食社区，开始您的美食之旅")],-1)),l("div",D,[a(C,{ref_key:"registerFormRef",ref:p,model:r,rules:y,"label-position":"top","status-icon":"",onKeyup:q(v,["enter"]),class:"auth-form"},{default:t(()=>[a(i,{label:"用户名",prop:"username",class:"custom-form-item"},{default:t(()=>[a(s,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),placeholder:"创建用于登录的用户名 (至少3位)","prefix-icon":n(B),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"邮箱",prop:"email",class:"custom-form-item"},{default:t(()=>[a(s,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.email=o),placeholder:"用于验证和密码找回","prefix-icon":n(A),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"密码",prop:"password",class:"custom-form-item"},{default:t(()=>[a(s,{type:"password",modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=o=>r.password=o),placeholder:"请输入至少 6 位密码","show-password":"","prefix-icon":n(V),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"确认密码",prop:"confirmPassword",class:"custom-form-item"},{default:t(()=>[a(s,{type:"password",modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=o=>r.confirmPassword=o),placeholder:"请再次输入密码","show-password":"","prefix-icon":n(V),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{prop:"agreement",class:"agreement-item"},{default:t(()=>[a(n(F),{modelValue:r.agreement,"onUpdate:modelValue":e[4]||(e[4]=o=>r.agreement=o)},{default:t(()=>[e[7]||(e[7]=d(" 我已阅读并同意 ")),a(n(f),{type:"primary"},{default:t(()=>e[5]||(e[5]=[d("用户协议")])),_:1}),e[8]||(e[8]=d(" 和 ")),a(n(f),{type:"primary"},{default:t(()=>e[6]||(e[6]=[d("隐私政策")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(i,{class:"button-item"},{default:t(()=>[a(E,{type:"primary",onClick:v,loading:g.value,class:"submit-button"},{default:t(()=>e[9]||(e[9]=[d(" 立即注册 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),l("div",G,[e[11]||(e[11]=l("span",null,"已有账号？",-1)),a(n(f),{type:"primary",onClick:x,class:"login-link"},{default:t(()=>e[10]||(e[10]=[d("直接登录")])),_:1})])])])])])])}}}),Q=h(X,[["__scopeId","data-v-86b52987"]]);export{Q as default};
