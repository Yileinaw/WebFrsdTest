import{_ as F,r as g,X as _,c as k,w as o,a as r,y as p,an as l,u as m,az as w,q as P,A as v,D as q}from"./index-B8L1PXQk.js";const A={__name:"AccountSettings",setup(B){const t=g(null),i=g(!1),s=_({currentPassword:"",newPassword:"",confirmPassword:""}),b=_({currentPassword:[{required:!0,message:"请输入当前密码",trigger:"blur"}],newPassword:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,message:"密码长度不能少于 6 位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认新密码",trigger:"blur"},{validator:(u,e,a)=>{e===""?a(new Error("请再次输入新密码")):e!==s.newPassword?a(new Error("两次输入的新密码不一致")):a()},trigger:"blur"}]}),x=async()=>{t.value&&await t.value.validate(async u=>{if(u){i.value=!0,console.log("Submitting password change:",s);try{await new Promise(e=>setTimeout(e,500)),v.success("密码修改成功"),f()}catch(e){console.error("Password change failed:",e),v.error("密码修改失败，请检查当前密码是否正确")}finally{i.value=!1}}else return console.log("Password form validation failed"),!1})},f=()=>{t.value&&t.value.resetFields()};return(u,e)=>{const a=l("el-input"),d=l("el-form-item"),c=l("el-button"),V=l("el-form"),y=l("el-divider"),C=l("el-card");return q(),k(C,{class:"account-settings-card"},{header:o(()=>e[3]||(e[3]=[p("div",{class:"card-header"},[p("span",null,"账号安全设置")],-1)])),default:o(()=>[r(V,{ref_key:"passwordFormRef",ref:t,model:s,rules:b,"label-width":"100px","label-position":"top",size:"large","status-icon":"",class:"password-form"},{default:o(()=>[e[6]||(e[6]=p("h4",null,"修改密码",-1)),r(d,{label:"当前密码",prop:"currentPassword"},{default:o(()=>[r(a,{type:"password",modelValue:s.currentPassword,"onUpdate:modelValue":e[0]||(e[0]=n=>s.currentPassword=n),"show-password":"","prefix-icon":m(w)},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,{label:"新密码",prop:"newPassword"},{default:o(()=>[r(a,{type:"password",modelValue:s.newPassword,"onUpdate:modelValue":e[1]||(e[1]=n=>s.newPassword=n),"show-password":"","prefix-icon":m(w)},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,{label:"确认新密码",prop:"confirmPassword"},{default:o(()=>[r(a,{type:"password",modelValue:s.confirmPassword,"onUpdate:modelValue":e[2]||(e[2]=n=>s.confirmPassword=n),"show-password":"","prefix-icon":m(w)},null,8,["modelValue","prefix-icon"])]),_:1}),r(d,null,{default:o(()=>[r(c,{type:"primary",onClick:x,loading:i.value},{default:o(()=>e[4]||(e[4]=[P("确认修改")])),_:1},8,["loading"]),r(c,{onClick:f},{default:o(()=>e[5]||(e[5]=[P("重置")])),_:1})]),_:1})]),_:1},8,["model","rules"]),r(y)]),_:1})}}},R=F(A,[["__scopeId","data-v-48800182"]]);export{R as default};
