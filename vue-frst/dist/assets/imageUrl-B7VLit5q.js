function c(e){try{if(console.log(`[getImageUrl] 处理图片URL: ${e}`),!e)return console.log("[getImageUrl] URL为空，返回默认占位图"),"/assets/images/placeholder.png";if(e.includes("supabase.co")){if(console.log("[getImageUrl] 检测到Supabase URL"),!e.includes("/object/public/")){const g=e.replace("/storage/v1/","/storage/v1/object/public/");return console.log(`[getImageUrl] 转换为Supabase公共URL: ${g}`),g}return console.log("[getImageUrl] 已经是正确的Supabase公共URL"),e}if(e.startsWith("http://")||e.startsWith("https://"))return console.log("[getImageUrl] 使用原始绝对URL"),e;const t="https://your-backend-api-url.com";console.log(`[getImageUrl] API基础URL: ${t}`);const s=t.replace(/\/api\/?$/,"");console.log(`[getImageUrl] 服务器根URL: ${s}`);const o=e.startsWith("/")?e:`/${e}`;console.log(`[getImageUrl] 相对路径: ${o}`);const l=Date.now(),r=o.includes("?")?"&":"?",a=`${s}${o}${r}t=${l}`;return console.log(`[getImageUrl] 最终URL: ${a}`),a}catch(t){return console.error("[getImageUrl] 处理URL时出错:",t),"/assets/images/placeholder.png"}}export{c as g};
