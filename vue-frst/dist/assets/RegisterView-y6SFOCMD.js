import{d as R,U as P,r as _,B as b,c as U,a as l,ab as k,b as a,e as t,L as q,x as u,u as n,ac as g,o as B,ad as L,ae as N,af as h,ag as V,ah as F,l as d,Z as c,ai as S,i as I,_ as K}from"./index-u3ChIZEC.js";const M="/assets/images/register-illustration.svg",T={class:"auth-container"},$={class:"auth-content"},A={class:"auth-forms"},Z={class:"form-container"},j={class:"form-wrapper"},z={class:"login-link-container"},D=R({__name:"RegisterView",setup(G){const v=I();P();const p=_(null),f=_(!1),r=b({username:"",email:"",password:"",confirmPassword:"",agreement:!1}),y=b({username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,message:"用户名长度至少为 3 位",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:(m,e,s)=>{const i=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;if(!e)return s(new Error("请输入邮箱地址"));i.test(e)?s():s(new Error("请输入有效的邮箱地址"))},trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度至少为 6 位",trigger:"blur"}],confirmPassword:[{required:!0,message:"请确认密码",trigger:"blur"},{validator:(m,e,s)=>{e===""?s(new Error("请再次输入密码")):e!==r.password?s(new Error("两次输入的密码不一致")):s()},trigger:"blur"}],agreement:[{validator:(m,e,s)=>{e?s():s(new Error("请阅读并同意用户协议和隐私政策"))},trigger:"change"}]}),w=async()=>{p.value&&await p.value.validate(async m=>{if(m){if(!r.agreement){c.warning("请阅读并同意用户协议和隐私政策");return}f.value=!0;try{await S.register({name:r.username,username:r.username,email:r.email,password:r.password}),c.success("注册成功，请登录"),v.push("/login")}catch(e){let s="注册失败，请稍后再试";e.response&&e.response.data&&e.response.data.message?s=e.response.data.message:e.message&&(s=e.message),c.error(`注册失败: ${s}`)}finally{f.value=!1}}else console.log("注册表单校验失败")})},x=()=>{v.push("/login")};return(m,e)=>{const s=u("el-input"),i=u("el-form-item"),E=u("el-button"),C=u("el-form");return B(),U("div",T,[l("div",$,[e[13]||(e[13]=k('<div class="auth-branding" data-v-61665007><div class="brand-content" data-v-61665007><div class="logo-container" data-v-61665007><img src="'+L+'" alt="Logo" class="logo" data-v-61665007></div><h1 class="brand-title" data-v-61665007>美食社区</h1><p class="brand-slogan" data-v-61665007>发现美食，分享生活</p><div class="illustration" data-v-61665007><img src="'+M+'" alt="Illustration" data-v-61665007></div></div></div>',1)),l("div",A,[l("div",Z,[e[12]||(e[12]=l("div",{class:"form-header"},[l("h2",{class:"form-title"},"创建账号"),l("p",{class:"form-subtitle"},"加入我们的美食社区，开始您的美食之旅")],-1)),l("div",j,[a(C,{ref_key:"registerFormRef",ref:p,model:r,rules:y,"label-position":"top","status-icon":"",onKeyup:q(w,["enter"]),class:"auth-form"},{default:t(()=>[a(i,{label:"用户名",prop:"username",class:"custom-form-item"},{default:t(()=>[a(s,{modelValue:r.username,"onUpdate:modelValue":e[0]||(e[0]=o=>r.username=o),placeholder:"创建用于登录的用户名 (至少3位)","prefix-icon":n(N),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"邮箱",prop:"email",class:"custom-form-item"},{default:t(()=>[a(s,{modelValue:r.email,"onUpdate:modelValue":e[1]||(e[1]=o=>r.email=o),placeholder:"用于验证和密码找回","prefix-icon":n(h),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"密码",prop:"password",class:"custom-form-item"},{default:t(()=>[a(s,{type:"password",modelValue:r.password,"onUpdate:modelValue":e[2]||(e[2]=o=>r.password=o),placeholder:"请输入至少 6 位密码","show-password":"","prefix-icon":n(V),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{label:"确认密码",prop:"confirmPassword",class:"custom-form-item"},{default:t(()=>[a(s,{type:"password",modelValue:r.confirmPassword,"onUpdate:modelValue":e[3]||(e[3]=o=>r.confirmPassword=o),placeholder:"请再次输入密码","show-password":"","prefix-icon":n(V),class:"custom-input"},null,8,["modelValue","prefix-icon"])]),_:1}),a(i,{prop:"agreement",class:"agreement-item"},{default:t(()=>[a(n(F),{modelValue:r.agreement,"onUpdate:modelValue":e[4]||(e[4]=o=>r.agreement=o)},{default:t(()=>[e[7]||(e[7]=d(" 我已阅读并同意 ")),a(n(g),{type:"primary"},{default:t(()=>e[5]||(e[5]=[d("用户协议")])),_:1}),e[8]||(e[8]=d(" 和 ")),a(n(g),{type:"primary"},{default:t(()=>e[6]||(e[6]=[d("隐私政策")])),_:1})]),_:1},8,["modelValue"])]),_:1}),a(i,{class:"button-item"},{default:t(()=>[a(E,{type:"primary",onClick:w,loading:f.value,class:"submit-button"},{default:t(()=>e[9]||(e[9]=[d(" 立即注册 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"]),l("div",z,[e[11]||(e[11]=l("span",null,"已有账号？",-1)),a(n(g),{type:"primary",onClick:x,class:"login-link"},{default:t(()=>e[10]||(e[10]=[d("直接登录")])),_:1})])])])])])])}}}),Q=K(D,[["__scopeId","data-v-61665007"]]);export{Q as default};
